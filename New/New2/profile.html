<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    
        <!-- Bootstrap CSS -->
        <link href='https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css' rel='stylesheet'
            integrity='sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx' crossorigin='anonymous'>
    
    
        <!-- Vue 3: development -->
        <script src="https://unpkg.com/vue@next"></script>
    
        <!-- Axios -->
        <script src="https://unpkg.com/axios/dist/axios.js"></script>

        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

        <style>
            .profileIcon{
                width: 25px;
                height:25px;
            }

            .nav-item{
                color:#a17d60;
            }
            .appName{
                color:#a17d60;
            }

            body{
                background-color: #F8F7F6;
                font-weight: 300;
                line-height: 1.6;
                font-size: 1.05rem;
            }
        </style>

</head>
<body class="d-flex flex-column min-vh-100">
    <div class="container-fluid">
        <!-- START NAV BAR -->
        <div class="row navBar">
            <div class="col ps-3">
              <nav class="navbar navbar-expand-lg">
                <div class="container-fluid">
                  <a class="appName navbar-brand" href="home"><img src="./img/logo.jpg" style="width:50px;" alt=""></a>
                  <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#collapseNavbar" aria-controls="collapseNavbar" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                  </button>
                  <div class="collapse navbar-collapse " id="collapseNavbar">
                    <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                     
                      <li class="nav-item px-2">
                        <a class="nav-link" href="home.html" role="button">
                          Home
                        </a>
                      </li>
  
                      <li class="nav-item px-2">
                        <a class="nav-link" href="profile.html" role="button">
                          <img class="profileIcon" src="img/user.png" alt="Profile"/>
                        </a>
                      </li>
  
                      <li class="nav-item px-2">
                        <a class="nav-link" href="login.html" role="button">
                          Log Out
                        </a>
                      </li>                  
                    </ul>                  
                  </div>
                </div>
              </nav>
            </div>
        </div>

        <!-- Profile -->
    <div class="container mt-5" id="app2">
        <div class="row">
            <div class="col-md-4">
                <div class="card">
                    <div class="rounded-top text-white text-center" style="background-color: white; ">
                        <div class="mx-auto" style="width: 200px;">
                            <img v-bind:src="profilePic" src="./img/malechef.png" alt="Generic placeholder image" class="img-fluid img-thumbnail mt-5 mb-5 rounded-circle" style="width: 250px;">
                            <h4 style="color:black;" class="pt-3" v-bind:value="username" >{{username}}</h4>
                            <p v-bind:value="bio" class="text-muted py-5">{{bio}}</p>

                            <img v-bind:src="experience" src="./img/onestar.png" class='img-fluid pb-5'alt="">

                            <button type="button" class="btn mx-auto mt-1 px-2 py-2 my-5" style="z-index: 1; background-color:#a17d60;   display: flex;
                            justify-content: center;">
                              <a style="text-decoration: none; color:white; " href="editprofile.html" class="href">Edit profile</a>
                            </button> 

                        </div>
                      </div>
                </div>
            </div>

            <div class="col-md-8">
                <div class="card mb-4">
                    <div class="card border-0 p-3">
                        <div class="card-body">
                          <div class="row">
                            <div class="col-sm-3">
                              <h6 class="mb-0 px-3">Name</h6>
                            </div>
                            <div id="name"class="col-sm-9 text-secondary" v-bind:value="name" >{{name}}</div>
                          </div>
                          <hr>
                          <div class="row">
                            <div class="col-sm-3">
                              <h6 class="mb-0 px-3">Email</h6>
                            </div>
                            <div id="email"class="col-sm-9 text-secondary" v-bind:value="email">{{email}}</div>
                          </div>
                          <hr>
                          <div class="row">
                            <div class="col-sm-3">
                              <h6 id="gender"class="mb-0 px-3">Experience Level</h6>
                            </div>
                            <div class="col-sm-9 text-secondary" v-bind:value="exp">{{exp}}</div>
                          </div>
                          <hr>
                      </div>

                    </div>
                    
                </div>

                <!-- Display saved recipe -->
                <div class="card">
                    <h5 class="px-5 pt-5 pb-4">Saved Recipes</h5>
                    <div class="container px-5" id="display-recipe">
                    
                    

                    </div>
                </div>
            </div>
        </div>
    </div>

    
  <footer class="py-3 my-4 " class="mt-auto">
    <hr>
      <p class="text-center text-muted">&copy; 2022 Easycook, Inc</p>
      <ul class="nav justify-content-center  mb-3">
          <li class="nav-item"><a href="home.html" class="nav-link px-2 text-muted">Home</a></li>
          <li class="nav-item"><a href="findRecipe.html" class="nav-link px-2 text-muted">Recipes</a></li>
          <li class="nav-item"><a href="marketplace.html" class="nav-link px-2 text-muted">Marketplace</a></li>
          <li class="nav-item"><a href="#" class="nav-link px-2 text-muted">FAQs</a></li>
          <li class="nav-item"><a href="#" class="nav-link px-2 text-muted">About</a></li>
        </ul>
      
    </footer>
    
</body>
<script type="module">
   // Import the functions you need from the SDKs you need
   import { initializeApp } from "https://www.gstatic.com/firebasejs/9.12.1/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.12.1/firebase-analytics.js";
    import { getStorage, ref} from "https://www.gstatic.com/firebasejs/9.12.1/firebase-storage.js";
    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries

    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
        apiKey: "AIzaSyCUwFb-W_pR0s_iO2tplBAxXXakhVWs8lM",
        authDomain: "g2t5-wad2.firebaseapp.com",
        databaseURL: "https://g2t5-wad2-default-rtdb.asia-southeast1.firebasedatabase.app",
        projectId: "g2t5-wad2",
        storageBucket: "g2t5-wad2.appspot.com",
        messagingSenderId: "634091812622",
        appId: "1:634091812622:web:9c1e64920c60792226495f",
        measurementId: "G-MJKTY27Q23"
        };
    
    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);
    // const storage = getStorage();
    // const storageRef = ref(storage);


    import{
        getFirestore, doc, getDoc, setDoc, collection, addDoc, updateDoc, deleteDoc, deleteField
    }
    from "https://www.gstatic.com/firebasejs/9.12.1/firebase-firestore.js";


    const db = getFirestore();
    //Retrieve information
    const email = sessionStorage.getItem('email'); //unique identifier
    console.log(email)
    

  const app2 = Vue.createApp({
  //options 
  data(){
      return{
          //name: value pairs
          name: '',
          username: '',
          gender: '',
          exp: '',
          bio: '',
          image: '',
          email: '',
      }
  },
  computed:{
    experience(){
      if (this.exp.toLowerCase()== "beginner"){
        return "./img/onestar.png"
      }else if (this.exp.toLowerCase()=="intermediate"){
        return "./img/twostars.png"
      }else{
        return "./img/threestars.png"
      }
    },
    profilePic(){
      if(this.gender =="female"){
        return './img/femalechef.png'
      }else if( this.gender =="male"){
        return './img/malechef.png'
      }
    }
  },
  methods:{
    async GetADocument(){
      // var ref = collection(db,"Users",email)
      // const docSnap = await getDoc(ref)
      const email = sessionStorage.getItem('email'); //unique identifier
      const docSnap = await getDoc(doc(db,"Users",email))
      // const cityRef = db.collection('Users').doc(email);
      // const doc = await cityRef.get();
      if (!docSnap.exists) {
        console.log('No such document!');
      } else {
        console.log(docSnap.data())
        this.username = docSnap.data().username;
        this.name = docSnap.data().name;
        this.exp = docSnap.data().exp;
        this.bio = docSnap.data().bio;
        this.gender = docSnap.data().gender;
        this.image = docSnap.data().image;
        this.email = email
        this.recipes = docSnap.data().recipes;
      }
    }
  },
  
  created(){
    this.GetADocument()
  }
  

}).mount("#app2")

</script>

<!-- Bootstrap Javascript -->
<script src='https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js'
   integrity='sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa' 
   crossorigin='anonymous'></script>

<!-- <script src="displaySavedRecipes.js"></script> -->

</html>