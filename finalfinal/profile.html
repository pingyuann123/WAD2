<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="keywords"
      content="Easycook, â€‹Coffee &amp;amp; 01, 02, 03, 04, Receipe, Marketplace">
    <meta name="description" content="">
    <link rel="stylesheet" href="nicepage.css" media="screen">
    <link rel="stylesheet" href="Page-1.css" media="screen">
    <script class="u-script" type="text/javascript" src="jquery.js" defer=""></script>
    <script class="u-script" type="text/javascript" src="nicepage.js" defer=""></script>
    <meta name="generator" content="Nicepage 4.21.5, nicepage.com">
    <link id="u-theme-google-font" rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i|Open+Sans:300,300i,400,400i,500,500i,600,600i,700,700i,800,800i">
    <link id="u-page-google-font" rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Oswald:200,300,400,500,600,700|Lato:100,100i,300,300i,400,400i,700,700i,900,900i|Montserrat:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i|Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i">
      <script type="application/ld+json">{
        "@context": "http://schema.org",
        "@type": "Organization",
        "name": "",
        "logo": "images/default-logo.png"
    }</script>
      <meta name="theme-color" content="#478ac9">
      <meta property="og:title" content="Page 1">
      <meta property="og:type" content="website">


    <title>Profile</title>

        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    
        <!-- Bootstrap CSS -->
        <link href='https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css' rel='stylesheet'
            integrity='sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx' crossorigin='anonymous'>
    
        <link rel="stylesheet" href="findRecipe.css">
        <!-- Vue 3: development -->
        <script src="https://unpkg.com/vue@next"></script>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
        <!-- Axios -->
        <script src="https://unpkg.com/axios/dist/axios.js"></script>

        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

        <style>

            body{
              background-color: #F8F7F6;
              font-weight: 300;
              line-height: 1.6;
              font-size: 1.05rem;
            }

            .like-btn {
              font-size: 2rem;
              background: transparent;
              border: none;
              outline: none;
              color: grey;
              float: right;
              margin-right: 1rem;
          }

          .like-btn i:hover {
              transition: all 0.4s linear;
              cursor: pointer;
              opacity: 0.6;
          }

          #logoutbtn{
            border:white;
            /* background-color:#F8F7F6; */
            background: none;
          }
          #recipebtn{
            border:white;
            /* background-color:#F8F7F6; */
            background: none;
          }
          #profilebtn{
            border:white;
            /* background-color:#F8F7F6; */
            background: none;
          }
          #marketplacebtn{
            border:white;
            /* background-color:#F8F7F6; */
            background: none;
          }


        </style>

</head>
<body class="u-body u-xl-mode d-flex flex-column min-vh-100" data-lang="en" style='background-color:#F8F7F6'>
  <header class="u-clearfix u-header u-header" id="sec-6f6c">
    <div class="u-clearfix u-sheet u-valign-middle u-sheet-1">
      <a href="aboutUs.html" class="u-image u-logo u-image-1">
        <!-- <img src="images/default-logo.png" class="u-logo-image u-logo-image-1"> -->
        Easycook
      </a>
      <nav class="u-menu u-menu-dropdown u-offcanvas u-menu-1">
        <div class="menu-collapse" style="font-size: 1rem; letter-spacing: 0px;">
          <a class="u-button-style u-custom-left-right-menu-spacing u-custom-padding-bottom u-custom-top-bottom-menu-spacing u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base"
            href="#">
            <svg class="u-svg-link" viewBox="0 0 24 24">
              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#menu-hamburger"></use>
            </svg>
            <svg class="u-svg-content" version="1.1" id="menu-hamburger" viewBox="0 0 16 16" x="0px" y="0px"
              xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg">
              <g>
                <rect y="1" width="16" height="2"></rect>
                <rect y="7" width="16" height="2"></rect>
                <rect y="13" width="16" height="2"></rect>
              </g>
            </svg>
          </a>
        </div>
        <div class="u-nav-container">
          <ul class="u-nav u-unstyled u-nav-1">
            <li class="u-nav-item"><a class="u-button-style u-nav-link  u-text-hover-palette-1-base" href="home.html"
                style="padding: 10px 20px;">Home</a>
            </li>
            <li class="u-nav-item"><a class="u-button-style u-nav-link  u-text-hover-palette-1-base" href="findRecipe.html"
                style="padding: 10px 20px;"><button id="recipebtn">Recipes</button></a>
            </li>
            <li class="u-nav-item"><a class="u-button-style u-nav-link  u-text-hover-palette-1-base" href="marketplace.html"
                style="padding: 10px 20px;"><button id="marketplacebtn">Marketplace</button></a>
            </li>
            <li class="u-nav-item"><a class="u-button-style u-nav-link  u-text-hover-palette-1-base" href="profile.html"
                style="padding: 10px 20px;"><button id="profilebtn">Profile</button></a>
            </li>
            <li class="u-nav-item"><a class="u-button-style u-nav-link  u-text-hover-palette-1-base"
              style="padding: 10px 20px;"><button id="logoutbtn">Logout</button></a>
            </li>
          </ul>
        </div>

        <div class="u-nav-container-collapse">
          <div class="u-black u-container-style u-inner-container-layout u-opacity u-opacity-95 u-sidenav">
            <div class="u-inner-container-layout u-sidenav-overflow">
              <div class="u-menu-close"></div>
              <ul class="u-align-center u-nav u-popupmenu-items u-unstyled u-nav-2">
                <li class="u-nav-item"><a class="u-button-style u-nav-link" href="home.html">Home</a>
                </li>
                <li class="u-nav-item"><a class="u-button-style u-nav-link" href="findRecipe.html"><button id="recipebtn">Recipes</button></a>
                </li>
                <li class="u-nav-item"><a class="u-button-style u-nav-link" href="marketplace.html"><button id="marketplacebtn">Marketplace</button></a></a>
                </li>
                <li class="u-nav-item"><a class="u-button-style u-nav-link" href="profile.html"><button id="profilebtn">Profile</button></a>
                </li>
                <li class="u-nav-item"><a class=" u-button-style u-nav-link"><button id="logoutbtn">Logout</button></a>
                </li>
              </ul>
            </div>
          </div>
          <div class="u-black u-menu-overlay u-opacity u-opacity-70"></div>
        </div>

      </nav>

    </div>
  </header>
  <!-- End of nav bar -->

        <!-- Profile -->
    <div class="container my-3" id="app2">
        <div class="row">
            <div class="col-md-4">
                <div class="card shadow-sm" style="border-color: rgb(255, 215, 215); height: 100%">
                    <div class="rounded-top text-white text-center" style="background-color: white; ">
                        <div class="mx-auto" style="width: 250px;">
                            <img v-bind:src="profilePic" src="./img/malechef.png" alt="Generic placeholder image" class="img-fluid img-thumbnail mt-5 mb-5 rounded-circle" style="width: 200px;">
                            <h3 style="color:black;" class="pt-3" v-bind:value="username" >{{username}}</h3>
                            <p v-bind:value="bio" class="text-muted py-5">{{bio}}</p>

                            <img v-bind:src="experience" src="./img/onestar.png" class='img-fluid pb-5'alt="">

                            <button type="button" class="btn mx-auto mt-5 px-3 py-2 my-5" style="z-index: 1; background-color:#a17d60;   display: flex;
                            justify-content: center;">
                              <a style="text-decoration: none; color:white; " href="editprofile.html" class="href">Edit profile</a>
                            </button> 

                        </div>
                      </div>
                </div>
            </div>

            <div class="col-md-8">
                <div class="card mb-4 shadow-sm" style="border-color: rgb(255, 215, 215)">
                    <div class="card border-0 p-3">
                        <div class="card-body">
                          <div class="row">
                            <div class="col-sm-3">
                              <h6 class="mb-0 px-3">Name</h6>
                            </div>
                            <div id="name"class="col-sm-9 text-secondary" v-bind:value="name" >{{name}}</div>
                          </div>
                          <hr>
                          <div class="row">
                            <div class="col-sm-3">
                              <h6 class="mb-0 px-3">Email</h6>
                            </div>
                            <div id="email"class="col-sm-9 text-secondary" v-bind:value="email">{{email}}</div>
                          </div>
                          <hr>
                          <div class="row">
                            <div class="col-sm-3">
                              <h6 id="gender"class="mb-0 px-3">Experience Level</h6>
                            </div>
                            <div class="col-sm-9 text-secondary" v-bind:value="exp">{{exp}}</div>
                          </div>
                          <hr>
                      </div>

                    </div>
                    
                </div>

                <!-- Display saved recipe -->
                <div class="card pb-5 shadow-sm" style="border-color: rgb(255, 215, 215)">
                    <h5 class="px-5 pt-5 pb-4">Saved Recipes</h5>
                    <!-- <p class="mb-0"><a href="#!" class="text-muted">Show all</a></p> -->
                    <div class="container text-center px-5" id="display-recipe">
<!-- 
                      <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-4"> -->

                        <!-- <recipe-component v-for="recipe of recipes" v-bind:recipeID="recipe.id" v-bind:recipeImage="recipe.img" v-bind:recipeTitle = "recipe.title"></recipe-component>
                      </div> -->
                      
                    

                    </div>
                </div>
            </div>
        </div>
    </div>

      <!-- Footer -->
  <footer class="py-2 mt-auto border-top-1 border">
    <p class="text-center text-muted pt-2">&copy; 2022 Easycook, Inc</p>
    <ul class="nav justify-content-center  mb-3">
        <li class="nav-item"><a href="home.html" class="nav-link px-2 text-muted">Home</a></li>
        <li class="nav-item"><a href="findRecipe.html" class="nav-link px-2 text-muted">Recipes</a></li>
        <li class="nav-item"><a href="marketplace.html" class="nav-link px-2 text-muted">Marketplace</a></li>
        <li class="nav-item"><a href="#" class="nav-link px-2 text-muted">FAQs</a></li>
        <li class="nav-item"><a href="#" class="nav-link px-2 text-muted">About</a></li>
      </ul>
  </footer>
  <!-- End of footer -->

    
    
</body>
<script type="module">
   // Import the functions you need from the SDKs you need
   import { initializeApp } from "https://www.gstatic.com/firebasejs/9.12.1/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.12.1/firebase-analytics.js";
    import { getStorage, ref} from "https://www.gstatic.com/firebasejs/9.12.1/firebase-storage.js";
    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries

    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
        apiKey: "AIzaSyCUwFb-W_pR0s_iO2tplBAxXXakhVWs8lM",
        authDomain: "g2t5-wad2.firebaseapp.com",
        databaseURL: "https://g2t5-wad2-default-rtdb.asia-southeast1.firebasedatabase.app",
        projectId: "g2t5-wad2",
        storageBucket: "g2t5-wad2.appspot.com",
        messagingSenderId: "634091812622",
        appId: "1:634091812622:web:9c1e64920c60792226495f",
        measurementId: "G-MJKTY27Q23"
        };
    
    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);
    // const storage = getStorage();
    // const storageRef = ref(storage);


    import{
        getFirestore, doc, getDoc, setDoc, collection, addDoc, updateDoc, deleteDoc, deleteField
    }
    from "https://www.gstatic.com/firebasejs/9.12.1/firebase-firestore.js";


    const db = getFirestore();
    //Retrieve information
    const email = sessionStorage.getItem('email'); //unique identifier
    console.log(email)
    let logoutbtn =  document.getElementById("logoutbtn");

    // Update database when user wants to logout
    async function logout(){
      let email = localStorage.getItem("UserEmail")
      console.log(email)
      var ref = doc(db, "Users", email);
      await updateDoc(
          ref, {
              recipes: JSON.parse(localStorage.getItem('likedRecipes')),
              }
          )
          .then(()=>{
              alert("Logout Successful");
              window.location = "login.html";
              window.history.forward();
          })
          .catch((error)=>{
              alert("Logout Unsuccessful" + error);
      });
    }

logoutbtn.addEventListener("click",logout);
    

  const app2 = Vue.createApp({
  //options 
  data(){
      return{
          //name: value pairs
          name: '',
          username: '',
          gender: '',
          exp: '',
          bio: '',
          image: '',
          email: '',
          //recipe details
          recipes: [],
          recipeImage: '',
          recipeTitle: '',
          recipeID: '',
          recipeLink: '',

      }
  },
  computed:{
    experience(){
      if (this.exp.toLowerCase()== "beginner"){
        return "./img/onestar.png"
      }else if (this.exp.toLowerCase()=="intermediate"){
        return "./img/twostars.png"
      }else{
        return "./img/threestars.png"
      }
    },
    profilePic(){
      if(this.gender =="female"){
        return './img/femalechef.png'
      }else if( this.gender =="male"){
        return './img/malechef.png'
      }
    }
  },
  methods:{
    async GetADocument(){
      // var ref = collection(db,"Users",email)
      // const docSnap = await getDoc(ref)
      const email = localStorage.getItem('UserEmail'); //unique identifier
      const docSnap = await getDoc(doc(db,"Users",email))
      // const cityRef = db.collection('Users').doc(email);
      // const doc = await cityRef.get();
      if (!docSnap.exists) {
        console.log('No such document!');
      } else {
        console.log(docSnap.data())
        this.username = docSnap.data().username;
        this.name = docSnap.data().name;
        this.exp = docSnap.data().exp;
        this.bio = docSnap.data().bio;
        this.gender = docSnap.data().gender;
        this.image = docSnap.data().image;
        this.email = email;
        // this.recipes = docSnap.data().recipes;
        this.recipes = JSON.parse(localStorage.getItem('recipes'))
        console.log(JSON.parse(localStorage.getItem('recipes')))
      }
    },
    logout(){
          localStorage.clear();
          alert('Logout Successful!');
          window.location = "login.html";
        }
      
  },
  
  created(){
    this.GetADocument()
  }
  
  

}).mount("#app2")

// app2.component('recipe-component', {
//         //custom attributes / inputs
//         props: ['recipeID','recipeImage','recipeTitle'],
//         //data used internally/ locally 
//         data(){
//             return { 
//                 //name: value pairs
//             }
//         },
//         computed:{
//           getRecipeLink(){
//             url = `https://api.spoonacular.com/recipes/${recipeID}/information`;
//             axios.get(url,{
//                 params:{ 
//                     apiKey: 'bfdf9716b064437383509f5530dcfde9'
//                 }
//             })
//             .then(response=>{
//                 console.log(response.data)

//             })
//             .catch(error=>{
//                 console.log(error)
//             })
//           }
//         },
//         //cutomised template
//         template: `
//         <div class = "col">
//         <div class="card" style="width: 18rem;">
//             <img src="{{recipeImage}}" class="card-img-top" alt="...">
//             <div class="card-body">
//                 <p class="card-text">{{recipeTitle}}</p>
//                 <a href="{{getRecipeLink}}">Go To Recipe</a>
//             </div>
//         </div>
//       </div>
//         `
//     }
    
//     )




</script>

<!-- Bootstrap Javascript -->
<script src='https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js'
   integrity='sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa' 
   crossorigin='anonymous'></script>

<!-- <script src="displaySavedRecipes.js"></script> -->
<script src="displaySavedRecipes.js"></script>

</html>