<html>
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta charset="utf-8">
        <meta name="keywords"
          content="Easycook, â€‹Coffee &amp;amp; 01, 02, 03, 04, Receipe, Marketplace">
        <meta name="description" content="">
        <link rel="stylesheet" href="nicepage.css" media="screen">
        <link rel="stylesheet" href="Page-1.css" media="screen">
        <script class="u-script" type="text/javascript" src="jquery.js" defer=""></script>
        <script class="u-script" type="text/javascript" src="nicepage.js" defer=""></script>
        <meta name="generator" content="Nicepage 4.21.5, nicepage.com">
        <link id="u-theme-google-font" rel="stylesheet"
          href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i|Open+Sans:300,300i,400,400i,500,500i,600,600i,700,700i,800,800i">
        <link id="u-page-google-font" rel="stylesheet"
          href="https://fonts.googleapis.com/css?family=Oswald:200,300,400,500,600,700|Lato:100,100i,300,300i,400,400i,700,700i,900,900i|Montserrat:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i|Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i">
          <script type="application/ld+json">{
            "@context": "http://schema.org",
            "@type": "Organization",
            "name": "",
            "logo": "images/default-logo.png"
        }</script>
          <meta name="theme-color" content="#478ac9">
          <meta property="og:title" content="Page 1">
          <meta property="og:type" content="website">
          
        <!-- bootstrap CSS -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
        <!-- <link rel="stylesheet" href="loginregCss"/> -->

        <title>Registration</title>

    <style>
        /* Navigation Bar Styling*/
        

        body{
            background-color:rgb(255, 255, 255);
            font-weight: 300;
            line-height: 1.6;
            font-size: 1.05rem;
        }


        img{
            width: 100%;
        }

        .rightBox{
            margin-left: 15%;
            margin-right: 15%;
        }

        </style>

    </head>
    <body class="d-flex flex-column min-vh-100">
        <!-- Navigation bar -->
        <nav class="navbar navbar-expand-lg  pb-2" id="headerNav">

          </nav>
         <!-- End of Navigation bar -->
    
         <div class="container-fluid">
            <div class="row">


              <!-- left side -->
              <div class="col-xl-6 col-lg-6 col-md-6 col-sm-5 col-xs-4 d-flex">
                <iframe src="https://embed.lottiefiles.com/animation/26901"style="padding:0; width: 100%; height: 100%; margin: 0"></iframe>
              </div>
                
              <!-- right side -->
              <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12 col-xs-12 text-black">
                <div class="pb-3">
                <div class="rightBox centered-element" >
                    <form class="registerForm">
          
                    <h1 class="registerWord pt-5 pb-3 text-center fw-normal mt-3">Register</h1>
                    <p class="registersub text-center">Do you have an Account? <a href="login.html" class="link-info">Log in Here</a></p>
        
                    <hr class="lineBreak pb-2"></hr>
                          
                    <div class="form-outline mb-3">
                      <label class="nameLabel form-label" for="name">Name</label>
                      <input type="name" id="name" class="form-control form-control-lg" />
                    </div>
                    
                    <div class="form-outline mb-3">
                      <label class="usernameLabel form-label" for="username">Username</label>
                      <input type="name" id="username" class="form-control form-control-lg" />
                    </div>

                    <div class="form-outline mb-3">
                      <label class="emailLabel form-label" for="email">Email address</label>
                      <input type="email" id="email" class="form-control form-control-lg" />
                    </div>
        
                    <div class="form-outline mb-3">
                      <label class="passwordLabel form-label" for="password">Password</label>
                      <input type="password" id="password" class="form-control form-control-lg" />
                    </div>
                    <div id="regalert">

                    </div>
                    <div class="mt-5  text-center">
                        <button style="background-color:#a17d60; color:white" id = "register" class="registerBtn btn btn-lg" type="button">Sign up</button>
                    </div>

        
                    <div class=" mt-4 text-center">
                        <div class="line"></div>
                        <p class="text-center fw-bold mx-3 text-muted">OR</p>
                    </div>
                    <div class="text-center mt-4">
                        <button type="button" class="btn btn-link btn-floating mx-1">
                          <img style="width:150px"src="./img/allLogos.png" alt="">
                        </button>
                    </div>
                  </form>
                </div>
                
              </div>
            </div>
         </div>
         </div>
        
            <!-- Footer -->
  <footer class="py-2 mt-auto border-top-1 border">
    <p class="text-center text-muted pt-2">&copy; 2022 Easycook, Inc</p>
    <ul class="nav justify-content-center  mb-3">
        <li class="nav-item"><a href="" class="nav-link px-2 text-muted">Home</a></li>
        <li class="nav-item"><a href="" class="nav-link px-2 text-muted">Recipes</a></li>
        <li class="nav-item"><a href="" class="nav-link px-2 text-muted">Marketplace</a></li>
        <li class="nav-item"><a href="#" class="nav-link px-2 text-muted">FAQs</a></li>
        <li class="nav-item"><a href="#" class="nav-link px-2 text-muted">About</a></li>
      </ul>
  </footer>
  <!-- End of footer -->
      
        
    </body>
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.12.1/firebase-app.js";
        import { getDatabase, set, ref } from "https://www.gstatic.com/firebasejs/9.12.1/firebase-database.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.12.1/firebase-analytics.js";
        import { getAuth, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/9.12.1/firebase-auth.js";
  
  
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries
      
        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
          apiKey: "AIzaSyCUwFb-W_pR0s_iO2tplBAxXXakhVWs8lM",
          authDomain: "g2t5-wad2.firebaseapp.com",
          databaseURL: "https://g2t5-wad2-default-rtdb.asia-southeast1.firebasedatabase.app",
          projectId: "g2t5-wad2",
          storageBucket: "g2t5-wad2.appspot.com",
          messagingSenderId: "634091812622",
          appId: "1:634091812622:web:9c1e64920c60792226495f",
          measurementId: "G-MJKTY27Q23"
        };
      
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);
        const analytics = getAnalytics(app);
  
        const auth = getAuth();
  
        register.addEventListener('click', (e) => {
  
          var username = document.getElementById('username').value
          var email = document.getElementById('email').value
          var name = document.getElementById('name').value
          var password = document.getElementById('password').value
  
  
          
          createUserWithEmailAndPassword(auth, email, password)
          .then((userCredential) => {
            // Signed in 
            const user = userCredential.user;
  
            set(ref(database, 'users/' + user.uid), {
              name: name,
              username: username,
              email: email
            })
  
            console.log(username)
            console.log('Registration Complete!');
  
              //Storing of user registration info to new page 
              sessionStorage.setItem('name',name)
              sessionStorage.setItem('username',username)
              sessionStorage.setItem('email',email)
              sessionStorage.setItem('uid',user.uid)

  
            window.location = "registration2.html";
  
            // ...
          })
          .catch((error) => {
            const errorCode = error.code;
            const errorMessage = error.message;
            
            console.log(errorMessage)
            var aler_div =  document.getElementById('regalert')
            var alert_para = document.createElement('p')
            alert_para.innerHTML += `<div class="alert alert-danger alert-dismissible fade show" role="alert">
                                    <strong>Error!</strong> Please input a valid email and password!
                                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                                  </div>`
              // console.log(para)
            aler_div.appendChild(alert_para)
            // ..
          });
        })
  </script>
</html>
